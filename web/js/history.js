!function(a,b){"use strict";var c=a.History=a.History||{};if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={handlers:{},_uid:1,uid:function(a){return a._uid||(a._uid=c.Adapter._uid++)},bind:function(a,b,d){var e=c.Adapter.uid(a);c.Adapter.handlers[e]=c.Adapter.handlers[e]||{},c.Adapter.handlers[e][b]=c.Adapter.handlers[e][b]||[],c.Adapter.handlers[e][b].push(d),a["on"+b]=function(a,b){return function(d){c.Adapter.trigger(a,b,d)}}(a,b)},trigger:function(a,b,d){d=d||{};var e,f,g=c.Adapter.uid(a);for(c.Adapter.handlers[g]=c.Adapter.handlers[g]||{},c.Adapter.handlers[g][b]=c.Adapter.handlers[g][b]||[],e=0,f=c.Adapter.handlers[g][b].length;f>e;++e)c.Adapter.handlers[g][b][e].apply(this,[d])},extractEventData:function(a,c){var d=c&&c[a]||b;return d},onDomLoad:function(b){var c=a.setTimeout(function(){b()},2e3);a.onload=function(){clearTimeout(c),b()}}},"undefined"!=typeof c.init&&c.init()}(window),function(a,b){"use strict";var c=(a.console||b,a.document),d=a.navigator,e=a.sessionStorage||!1,f=a.setTimeout,g=a.clearTimeout,h=a.setInterval,i=a.clearInterval,j=a.JSON,k=(a.alert,a.History=a.History||{}),l=a.history;try{e.setItem("TEST","1"),e.removeItem("TEST")}catch(m){e=!1}if(j.stringify=j.stringify||j.encode,j.parse=j.parse||j.decode,"undefined"!=typeof k.init)throw new Error("History.js Core has already been loaded...");k.init=function(a){return"undefined"==typeof k.Adapter?!1:("undefined"!=typeof k.initCore&&k.initCore(),"undefined"!=typeof k.initHtml4&&k.initHtml4(),!0)},k.initCore=function(m){if("undefined"!=typeof k.initCore.initialized)return!1;if(k.initCore.initialized=!0,k.options=k.options||{},k.options.hashChangeInterval=k.options.hashChangeInterval||100,k.options.safariPollInterval=k.options.safariPollInterval||500,k.options.doubleCheckInterval=k.options.doubleCheckInterval||500,k.options.disableSuid=k.options.disableSuid||!1,k.options.storeInterval=k.options.storeInterval||1e3,k.options.busyDelay=k.options.busyDelay||250,k.options.initialTitle=k.options.initialTitle||c.title,k.options.html4Mode=k.options.html4Mode||!1,k.options.delayInit=k.options.delayInit||!1,k.intervalList=[],k.clearAllIntervals=function(){var a,b=k.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)i(b[a]);k.intervalList=null}},k.getInternetExplorerMajorVersion=function(){var a=k.getInternetExplorerMajorVersion.cached="undefined"!=typeof k.getInternetExplorerMajorVersion.cached?k.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=c.createElement("div"),d=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&d[0];);return a>4?a:!1}();return a},k.isInternetExplorer=function(){var a=k.isInternetExplorer.cached="undefined"!=typeof k.isInternetExplorer.cached?k.isInternetExplorer.cached:Boolean(k.getInternetExplorerMajorVersion());return a},k.options.html4Mode?k.emulated={pushState:!0,hashChange:!0}:k.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(d.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(d.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in c)||k.isInternetExplorer()&&k.getInternetExplorerMajorVersion()<8)},k.enabled=!k.emulated.pushState,k.bugs={setHash:Boolean(!k.emulated.pushState&&"Apple Computer, Inc."===d.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(d.userAgent)),safariPoll:Boolean(!k.emulated.pushState&&"Apple Computer, Inc."===d.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(d.userAgent)),ieDoubleCheck:Boolean(k.isInternetExplorer()&&k.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(k.isInternetExplorer()&&k.getInternetExplorerMajorVersion()<7)},k.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},k.cloneObject=function(a){var b,c;return a?(b=j.stringify(a),c=j.parse(b)):c={},c},k.getRootUrl=function(){var a=c.location.protocol+"//"+(c.location.hostname||c.location.host);return c.location.port,a+="/"},k.getBaseHref=function(){var a=c.getElementsByTagName("base"),b=null,d="";return 1===a.length&&(b=a[0],d=b.href.replace(/[^\/]+$/,"")),d=d.replace(/\/+$/,""),d&&(d+="/"),d},k.getBaseUrl=function(){var a=k.getBaseHref()||k.getBasePageUrl()||k.getRootUrl();return a},k.getPageUrl=function(){var a,b=k.getState(!1,!1),c=(b||{}).url||k.getLocationHref();return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"})},k.getBasePageUrl=function(){var a=k.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},k.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?k.getRootUrl()+a.replace(/^\/+/,""):"#"===d?k.getPageUrl().replace(/#.*/,"")+a:"?"===d?k.getPageUrl().replace(/[\?#].*/,"")+a:b?k.getBaseUrl()+a.replace(/^(\.\/)+/,""):k.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},k.getShortUrl=function(a){var b=a,c=k.getBaseUrl(),d=k.getRootUrl();return k.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),k.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},k.getLocationHref=function(a){return a=a||c,a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash?a.location.href:-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href},k.store={},k.idToState=k.idToState||{},k.stateToId=k.stateToId||{},k.urlToId=k.urlToId||{},k.storedStates=k.storedStates||[],k.savedStates=k.savedStates||[],k.normalizeStore=function(){k.store.idToState=k.store.idToState||{},k.store.urlToId=k.store.urlToId||{},k.store.stateToId=k.store.stateToId||{}},k.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=k.getLastSavedState();return!c&&b&&(c=k.createStateObject()),a&&(c=k.cloneObject(c),c.url=c.cleanUrl||c.url),c},k.getIdByState=function(a){var b,c=k.extractId(a.url);if(!c)if(b=k.getStateString(a),"undefined"!=typeof k.stateToId[b])c=k.stateToId[b];else if("undefined"!=typeof k.store.stateToId[b])c=k.store.stateToId[b];else{for(;;)if(c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof k.idToState[c]&&"undefined"==typeof k.store.idToState[c])break;k.stateToId[b]=c,k.idToState[c]=a}return c},k.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=k.getFullUrl(a.url?a.url:k.getLocationHref()),b.hash=k.getShortUrl(b.url),b.data=k.cloneObject(a.data),b.id=k.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!k.isEmptyObject(b.data),(b.title||c)&&k.options.disableSuid!==!0&&(b.hash=k.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=k.getFullUrl(b.hash),(k.emulated.pushState||k.bugs.safariPoll)&&k.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},k.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=k.normalizeState(d)},k.getStateById=function(a){a=String(a);var c=k.idToState[a]||k.store.idToState[a]||b;return c},k.getStateString=function(a){var b,c,d;return b=k.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=j.stringify(c)},k.getStateId=function(a){var b,c;return b=k.normalizeState(a),c=b.id},k.getHashByState=function(a){var b,c;return b=k.normalizeState(a),c=b.hash},k.extractId=function(a){var b,c,d,e;return e=-1!=a.indexOf("#")?a.split("#")[0]:a,c=/(.*)\&_suid=([0-9]+)$/.exec(e),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},k.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},k.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=k.extractId(a),c&&(e=k.getStateById(c)),e||(d=k.getFullUrl(a),c=k.getIdByUrl(d)||!1,c&&(e=k.getStateById(c)),e||!b||k.isTraditionalAnchor(a)||(e=k.createStateObject(null,null,d))),e},k.getIdByUrl=function(a){var c=k.urlToId[a]||k.store.urlToId[a]||b;return c},k.getLastSavedState=function(){return k.savedStates[k.savedStates.length-1]||b},k.getLastStoredState=function(){return k.storedStates[k.storedStates.length-1]||b},k.hasUrlDuplicate=function(a){var b,c=!1;return b=k.extractState(a.url),c=b&&b.id!==a.id},k.storeState=function(a){return k.urlToId[a.url]=a.id,k.storedStates.push(k.cloneObject(a)),a},k.isLastSavedState=function(a){var b,c,d,e=!1;return k.savedStates.length&&(b=a.id,c=k.getLastSavedState(),d=c.id,e=b===d),e},k.saveState=function(a){return k.isLastSavedState(a)?!1:(k.savedStates.push(k.cloneObject(a)),!0)},k.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?k.savedStates[k.savedStates.length-1]:0>a?k.savedStates[k.savedStates.length+a]:k.savedStates[a]},k.getCurrentIndex=function(){var a=null;return a=k.savedStates.length<1?0:k.savedStates.length-1},k.getHash=function(a){var b,c=k.getLocationHref(a);return b=k.getHashByUrl(c)},k.unescapeHash=function(a){var b=k.normalizeHash(a);return b=decodeURIComponent(b)},k.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},k.setHash=function(a,b){var d,e;return b!==!1&&k.busy()?(k.pushQueue({scope:k,callback:k.setHash,args:arguments,queue:b}),!1):(k.busy(!0),d=k.extractState(a,!0),d&&!k.emulated.pushState?k.pushState(d.data,d.title,d.url,!1):k.getHash()!==a&&(k.bugs.setHash?(e=k.getPageUrl(),k.pushState(null,null,e+"#"+a,!1)):c.location.hash=a),k)},k.escapeHash=function(b){var c=k.normalizeHash(b);return c=a.encodeURIComponent(c),k.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},k.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=k.unescapeHash(b)},k.setTitle=function(a){var b,d=a.title;d||(b=k.getStateByIndex(0),b&&b.url===a.url&&(d=b.title||k.options.initialTitle));try{c.getElementsByTagName("title")[0].innerHTML=d.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return c.title=d,k},k.queues=[],k.busy=function(a){if("undefined"!=typeof a?k.busy.flag=a:"undefined"==typeof k.busy.flag&&(k.busy.flag=!1),!k.busy.flag){g(k.busy.timeout);var b=function(){var a,c,d;if(!k.busy.flag)for(a=k.queues.length-1;a>=0;--a)c=k.queues[a],0!==c.length&&(d=c.shift(),k.fireQueueItem(d),k.busy.timeout=f(b,k.options.busyDelay))};k.busy.timeout=f(b,k.options.busyDelay)}return k.busy.flag},k.busy.flag=!1,k.fireQueueItem=function(a){return a.callback.apply(a.scope||k,a.args||[])},k.pushQueue=function(a){return k.queues[a.queue||0]=k.queues[a.queue||0]||[],k.queues[a.queue||0].push(a),k},k.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),k.busy()?k.pushQueue(a):k.fireQueueItem(a),k},k.clearQueue=function(){return k.busy.flag=!1,k.queues=[],k},k.stateChanged=!1,k.doubleChecker=!1,k.doubleCheckComplete=function(){return k.stateChanged=!0,k.doubleCheckClear(),k},k.doubleCheckClear=function(){return k.doubleChecker&&(g(k.doubleChecker),k.doubleChecker=!1),k},k.doubleCheck=function(a){return k.stateChanged=!1,k.doubleCheckClear(),k.bugs.ieDoubleCheck&&(k.doubleChecker=f(function(){return k.doubleCheckClear(),k.stateChanged||a(),!0},k.options.doubleCheckInterval)),k},k.safariStatePoll=function(){var b,c=k.extractState(k.getLocationHref());if(!k.isLastSavedState(c))return b=c,b||(b=k.createStateObject()),k.Adapter.trigger(a,"popstate"),k},k.back=function(a){return a!==!1&&k.busy()?(k.pushQueue({scope:k,callback:k.back,args:arguments,queue:a}),!1):(k.busy(!0),k.doubleCheck(function(){k.back(!1)}),l.go(-1),!0)},k.forward=function(a){return a!==!1&&k.busy()?(k.pushQueue({scope:k,callback:k.forward,args:arguments,queue:a}),!1):(k.busy(!0),k.doubleCheck(function(){k.forward(!1)}),l.go(1),!0)},k.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)k.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)k.back(b)}return k},k.emulated.pushState){var n=function(){};k.pushState=k.pushState||n,k.replaceState=k.replaceState||n}else k.onPopState=function(b,c){var d,e,f=!1,g=!1;return k.doubleCheckComplete(),(d=k.getHash())?(e=k.extractState(d||k.getLocationHref(),!0),e?k.replaceState(e.data,e.title,e.url,!1):(k.Adapter.trigger(a,"anchorchange"),k.busy(!1)),k.expectedStateId=!1,!1):(f=k.Adapter.extractEventData("state",b,c)||!1,g=f?k.getStateById(f):k.expectedStateId?k.getStateById(k.expectedStateId):k.extractState(k.getLocationHref()),g||(g=k.createStateObject(null,null,k.getLocationHref())),k.expectedStateId=!1,k.isLastSavedState(g)?(k.busy(!1),!1):(k.storeState(g),k.saveState(g),k.setTitle(g),k.Adapter.trigger(a,"statechange"),k.busy(!1),!0))},k.Adapter.bind(a,"popstate",k.onPopState),k.pushState=function(b,c,d,e){if(k.getHashByUrl(d)&&k.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&k.busy())return k.pushQueue({scope:k,callback:k.pushState,args:arguments,queue:e}),!1;k.busy(!0);var f=k.createStateObject(b,c,d);return k.isLastSavedState(f)?k.busy(!1):(k.storeState(f),k.expectedStateId=f.id,l.pushState(f.id,f.title,f.url),k.Adapter.trigger(a,"popstate")),!0},k.replaceState=function(b,c,d,e){if(k.getHashByUrl(d)&&k.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&k.busy())return k.pushQueue({scope:k,callback:k.replaceState,args:arguments,queue:e}),!1;k.busy(!0);var f=k.createStateObject(b,c,d);return k.isLastSavedState(f)?k.busy(!1):(k.storeState(f),k.expectedStateId=f.id,l.replaceState(f.id,f.title,f.url),k.Adapter.trigger(a,"popstate")),!0};if(e){try{k.store=j.parse(e.getItem("History.store"))||{}}catch(o){k.store={}}k.normalizeStore()}else k.store={},k.normalizeStore();k.Adapter.bind(a,"unload",k.clearAllIntervals),k.saveState(k.storeState(k.extractState(k.getLocationHref(),!0))),e&&(k.onUnload=function(){var a,b,c;try{a=j.parse(e.getItem("History.store"))||{}}catch(d){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in k.idToState)k.idToState.hasOwnProperty(b)&&(a.idToState[b]=k.idToState[b]);for(b in k.urlToId)k.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=k.urlToId[b]);for(b in k.stateToId)k.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=k.stateToId[b]);k.store=a,k.normalizeStore(),c=j.stringify(a);try{e.setItem("History.store",c)}catch(f){if(f.code!==DOMException.QUOTA_EXCEEDED_ERR)throw f;e.length&&(e.removeItem("History.store"),e.setItem("History.store",c))}},k.intervalList.push(h(k.onUnload,k.options.storeInterval)),k.Adapter.bind(a,"beforeunload",k.onUnload),k.Adapter.bind(a,"unload",k.onUnload)),k.emulated.pushState||(k.bugs.safariPoll&&k.intervalList.push(h(k.safariStatePoll,k.options.safariPollInterval)),"Apple Computer, Inc."!==d.vendor&&"Mozilla"!==(d.appCodeName||"")||(k.Adapter.bind(a,"hashchange",function(){k.Adapter.trigger(a,"popstate")}),k.getHash()&&k.Adapter.onDomLoad(function(){k.Adapter.trigger(a,"hashchange")})))},k.options&&k.options.delayInit||k.init()}(window);