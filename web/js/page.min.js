!function(){"use strict";function a(a,b){return b||(b=document),b.querySelector(a)}function b(a){var b=a.nextElementSibling,c=0;if(b){var d=e.getComputedStyle(b);c=parseFloat(d.marginTop)||0}return c}function c(a,c){n.measure(function(){var d=a.getBoundingClientRect(),e=d.bottom-d.top,f=e%c,g=f>=.05?c-f+b(a):0;n.mutate(function(){a.style.marginBottom=""+g+"px"})})}function d(a){var b,d,f=parseFloat(e.getComputedStyle(a,":after").height)||24,g=a.children;for(b=0;b<g.length,d=g[b];b++)d.hasAttribute("data-reflow")&&c(d,f)}var e=window,f=e.document,g=f.documentElement,h=["Webkit","Moz","ms","O"],i=function(){function a(a){var c,f,g=b(a.target);if(g){if("form"===g.nodeName.toLowerCase()&&"submit"!==a.type)return;c=g.getAttribute("data-observe"),d.call(e,c)||(e[c]={}),e[c].triggered=!0,f=e[c].fn,f&&f.call(g,a,g)}}function b(a){if("closest"in a)return a.closest("[data-observe]");for(;a&&a!==g;){if(a.hasAttribute("data-observe"))return a;a=a.parentNode}return null}var c={},d={}.hasOwnProperty,e={};return c.bind=function(a,b){e[a]={triggered:!1,fn:b}},c.unbind=function(a){d.call(e,a)&&delete e[a]},c.isTriggered=function(a){return d.call(e,a)&&e[a].triggered},c.disable=function(){g.removeEventListener("click",a,!1),g.removeEventListener("submit",a,!1)},g.addEventListener("click",a,!1),g.addEventListener("submit",a,!1),c}(),j=function(){function a(){return d||(d=f.createElement("div"),d.style.cssText="position:absolute;width:1rem;height:1rem;left;-1rem;top:-1rem;",h&&(d.style[h]="font-size 1ms linear"),g.getElementsByTagName("body")[0].appendChild(d)),d}function b(){var b=a().getBoundingClientRect();return b.bottom-b.top}function c(a){i=b();var c,d;for(d in k)k.hasOwnProperty(d)&&(c=k[d].fn,c&&c.call(null,i))}var d,e,h,i,j={},k={},l={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"};for(var m in l)if(void 0!==g.style[m]){e=l[m],h=m;break}return j.bind=function(a,b){k[a]={fn:b}},j.unbind=function(a){k.hasOwnProperty(a)&&delete k[a]},j.disable=function(){e&&d&&d.removeEventListener(e,c,!1)},j.enable=function(){e&&d&&d.addEventListener(e,c,!1)},j.fontSize=function(){return i},i=b(),e&&a().addEventListener(e,c,!1),j}(),k=e.requestAnimationFrame,l=e.cancelAnimationFrame;k&&l||h.forEach(function(a){a=a.toLowerCase(),k=k||e[a+"RequestAnimationFrame"],l=l||e[a+"CancelAnimationFrame"]||e[a+"CancelRequestAnimationFrame"]}),k&&l||(k=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-d)),d=b+c;return e.setTimeout(function(){a(b+c)},c)},l=function(a){e.clearTimeout(a)});var m=function(){function a(){return e.orientation&&void 0!==e.orientation?Math.abs(+e.orientation)%180:0}function b(){var a,b;for(a in f)f.hasOwnProperty(a)&&(b=f[a].fn,b&&b.call(null,h,i))}function c(c){var d=e.innerWidth,f=e.innerHeight;if(d==h&&f==i)return c.preventDefault(),void c.stopImmediatePropagation();h=d,i=f;var g=a();return g!==j?(clearTimeout(k),b(),j=g):(clearTimeout(k),k=setTimeout(b,100))}var d={},f={},g="resize",h=e.innerWidth,i=e.innerHeight,j=a(),k=null;return d.bind=function(a,b){f[a]={fn:b}},d.unbind=function(a){f.hasOwnProperty(a)&&delete f[a]},d.disable=function(){e.removeEventListener(g,c,!1)},d.enable=function(){e.addEventListener(g,c,!1)},d.size=function(){return{width:e.innerWidth,height:e.innerHeight}},e.addEventListener(g,b,!1),d}(),n=function(){function a(){var a=this;a.reads=[],a.writes=[],a.raf=k.bind(e),h("initialized",a)}function b(a){a.scheduled||(a.scheduled=!0,a.raf(c.bind(null,a)),h("flush scheduled"))}function c(a){h("flush");var c,e=a.writes,f=a.reads;try{h("flushing reads",f.length),d(f),h("flushing writes",e.length),d(e)}catch(g){c=g}if(a.scheduled=!1,(f.length||e.length)&&b(a),c){if(h("task errored",c.message),!a["catch"])throw c;a["catch"](c)}}function d(a){h("run tasks");for(var b;b=a.shift();)b.fn.call(b.ctx)}function f(a,b){var c=a.indexOf(b);return!!~c&&!!a.splice(c,1)}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}var h=function(){};a.prototype={constructor:a,measure:function(a,c){h("measure");var d={fn:a,ctx:c};return this.reads.push(d),b(this),d},mutate:function(a,c){h("mutate");var d={fn:a,ctx:c};return this.writes.push(d),b(this),d},clear:function(a){return h("clear",a),f(this.reads,a)||f(this.writes,a)},extend:function(a){if(h("extend",a),"object"!=typeof a)throw new Error("expected object");var b=Object.create(this);return g(b,a),b.fastdom=this,b.initialize&&b.initialize(),b},"catch":null};var i=e.fastdom=e.fastdom||new a;return i}();!function(a,b,c){function d(f,j){var k=arguments[2];void 0===k&&(k={}),f=f.toUpperCase();var l="charset"in k?k.charset:d.defaults.charset,m="cacheBurst"in k?k.cacheBurst:d.defaults.cacheBurst,n="mimeType"in k?k.mimeType:d.defaults.mimeType,o=k.data,p=[],q={};Object.keys(d.defaults.headers).forEach(function(a){q[a]=d.defaults.headers[a]}),Object.keys(k.headers||{}).forEach(function(a){q[a]=k.headers[a]}),g(o)&&(Object.keys(o).forEach(function(a){var b=encodeURIComponent(a),c=o[a];Array.isArray(c)?c.forEach(function(a){p.push(b+"="+encodeURIComponent(a))}):p.push(b+"="+encodeURIComponent(c))}),"GET"===f?o=null:(o=h(p),p=[])),"string"==typeof o&&("GET"===f?(p.push(o),o=null):q[a]="application/x-www-form-urlencoded"),k.json&&g(k.json)&&(o=JSON.stringify(k.json),q[a]=b),a in q&&(q[a]+="; charset="+l),m&&"GET"===f&&p.push(m+"="+Date.now()),k.emulateHTTP&&c.indexOf(f)>1&&(p.push(k.emulateHTTP+"="+f),q["X-Http-Method-Override"]=f,f="POST"),p.length&&(j+=(~j.indexOf("?")?"&":"?")+h(p));var r=new XMLHttpRequest,s=new e(function(a,b){var c=function(a){return function(){b(new Error(a))}};r.onabort=c("abort"),r.onerror=c("error"),r.ontimeout=c("timeout"),r.onreadystatechange=function(){if(4===r.readyState){var c=1223===r.status?204:r.status,d=r.responseText;c>=200&&300>c||304===c?a(d):b(new Error(r.statusText))}},r.open(f,j,!0),r.timeout=k.timeout||d.defaults.timeout,Object.keys(q).forEach(function(a){var b=q[a];null!=b&&r.setRequestHeader(a,String(b))}),n&&(n in i?(r.responseType=n,n=i[n]):r.overrideMimeType&&r.overrideMimeType(n)),r.send(o)});return s[0]=r,s}var e=window.Promise,f=Object.prototype.toString,g=function(a){return a&&"[object Object]"===f.call(a)},h=function(a){return a.join("&").replace(/%20/g,"+")},i={json:b};if(c.forEach(function(a){d[a.toLowerCase()]=function(b,c){return d(a,b,c)}}),d.serialize=function(a){var b,c,d,e,f,g={};a="form"in a?[a]:"elements"in a?a.elements:[],b=0,c=a.length;for(var h;c>b;){h=a[b++];var i=h.name;if(!h.disabled&&i)switch(h.type){case"select-multiple":g[i]=[];case"select-one":f=h.options,d=0,e=f.length;for(var j;e>d;)j=f[d++],j.selected&&(i in g?g[i].push(j.value):g[i]=j.value);d=e=f=void 0;break;case void 0:case"fieldset":case"file":case"submit":case"reset":case"button":break;case"checkbox":if(h.checked&&g[i]){"string"==typeof g[i]&&(g[i]=[g[i]]),g[i].push(h.value);break}case"radio":if(!h.checked)break;default:g[i]=h.value}}return g},d.defaults={timeout:15e3,cacheBurst:"_",charset:"UTF-8",headers:{"X-Requested-With":"XMLHttpRequest"}},e)return d;throw new Error("In order to use XHR you have to include a Promise polyfill")}("Content-Type","application/json",["GET","POST"]);var o=a(".content"),p=o.clientWidth;d(o),i.bind("ajax",function(a,b){a.stopPropagation(),a.preventDefault(),console.log("Ajax: "+this.href)}),j.bind("page",function(){d(o)}),m.bind("rythmn",function(){n.measure(function(){var a=o.clientWidth;a!=p&&(d(o),p=a)})})}();